\documentclass[12pt,two side]{report}
\usepackage[numbers,super,sort&compress]{natbib}
\bibliographystyle{vancouver}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definitions for the title page
% Edit these to provide the correct information
% e.g. \newcommand{\reportauthor}{Timothy Kimber}

\newcommand{\reporttitle}{Background and Progress Report - I-MOTION}
\newcommand{\reportauthor}{Haiyi Wang}
\newcommand{\supervisor}{Aruna}
\newcommand{\degreetype}{Software Engineering}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% load some definitions and default packages
\input{includes}

% load some macros
\input{notation}

\date{June 2024}

\begin{document}

% load title page
\input{titlepage}


% page numbering etc.
\pagenumbering{roman}
\clearpage{\pagestyle{empty}\cleardoublepage}
\setcounter{page}{1}
\pagestyle{fancy}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%--- table of contents
\fancyhead[RE,LO]{\sffamily {Table of Contents}}
\tableofcontents 

\pagenumbering{arabic}
\setcounter{page}{1}
\fancyhead[LE,RO]{\slshape \rightmark}
\fancyhead[LO,RE]{\slshape \leftmark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}
\section{Motivation}
Contemporary urban system research is undergoing a profound change, which is mainly driven by the popularization of mobile technology. The inherent capabilities of mobile devices open up new avenues for data collection, allowing researchers to delve into the complexities of human behavior in urban environments. This paradigm shift highlights the need for innovative approaches to collecting and analyzing data, especially in areas such as travel patterns, time allocation, and integration of digital activities.\newline

The motivation for this report stems from an awareness of the changing research environment and the urgent need to address emerging challenges and opportunities in the field. Traditional methods of data collection, while valuable, often fail to capture the dynamic nature of human behavior in urban environments. Leveraging mobile platforms is a promising solution that provides real-time insights into how individuals navigate physical and digital Spaces, allocate time, and perceive productivity in different contexts.
\section{Objectives}
The project outlined in the report aims to address existing gaps in mobile data collection platforms by introducing new capabilities tailored to the specific needs of Imperial's Urban Systems Lab. By developing a new mobile platform-based time use and travel data collection platform, it aims to improve the breadth and depth of data available for interdisciplinary research efforts. This effort is driven by the desire to explore new dimensions of human behavior, from the modes of transportation used to the subtle interplay between physical and digital activities.\newline

In addition, the report aims to advance theoretical understanding and practical applications in the areas of urban planning, transportation, economics and public health. The insights gained from the data collected by the proposed platform have the potential to inform policy decisions, influence the development of urban infrastructure, and help create more livable and sustainable cities.\newline

The specific objectives of the application includes:
\begin{itemize}
  \item sensing motion of the device, to support inference of mode of transport
  \item incorporation of location-based capabilities and map-matching
  \item monitoring of app usage and data consumption
  \item Rule-driven user prompt (for data verification and manual inputs)
  \item Gathering of data from the associated wearable technologies
\end{itemize}
Fundamentally, this report is born out of a deep-seated belief in the transformative power of mobile technology to revolutionize the way we study and understand urban systems. By pushing the limits of data collection capabilities and fostering interdisciplinary collaboration, we hope to gain new insights that will drive positive change in the global urban environment.
\section{Contributions}
This project develops an application named I-MOTION, a modern cloud-native distributed mobile application that revolutionaries the smartphone-based person travel survey system and extends from a pure research application to a daily healthy tracking application for growing the research population. Although this project focuses on United Kingdom, its features and functionalities can be implemented and changed in any countries in a micro-serviced way.\newline

I-MOTION provides the following features:
\begin{itemize}
  \item Real-Time Motion Trail \& Trip Timeline Prediction Demonstration: 
  
  I-MOTION can show users' trips and activites in the specific day. Users can choose to see any day of their trails by switching in the calendar.
  
  \item Background Sensors' Updating \& Predictions with No Sense:

  When users don't use this application in the foreground, the application still record telephone's sensors(GPS, accelerometer, heart readers, etc.) and frequently predict and improve the model frequently
  
  \item Smart Watch Usage \& Connectivity:

  Use smart watch to record locations and other data in the way of GPS and other sensors like heart reader and blood oxygen to track healthy info.
  
  \item Verification of Predictions:

  Although this application will predict users' type of trips like modes of transport, users can still edit these predictions to make them as accurate as possible.
  
  \item Join Families \& Friends:

  Users can join their families in their activities and trips if families are connected by unique household ID. Users can also add others outside family by typing users' ID.

  \item Statistical Summary of Analysis:
  
  Applications summarises variable aspects of users' trips weekly, monthly, yearly, such as: percentage of modes of transports, data usage, and electrical \& fuel usage at home or in cars

  \item Third-Party API Support:

  Application integrates with APIs from partners, like Octopus Energy for electrical usage, SmartCar for fuel usage.

  \item Community Ranking for Good:

    Show users' ranking of green trips with their near people or the whole nations to help them having competitions or self-management, which makes this is not just only a research app.
  
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Literature Review}
\section{Overview of Traditional Survey Methods}
Traditional traffic survey methods, such as paper-based diaries and interviews, computer-assisted telephone interviews (CATI), and GPS-based methods have long been the primary means to understand and analyze traffic travel behavior\cite{alho2022online}\cite{cottrill2013future}\cite{hong2021insights}. However, these methods generally possess inherent limitations and disadvantages. They heavily rely on respondents' memory recall of travel details, often resulting in inaccurate and incomplete data\cite{hong2021insights}. Additionally, the data quality obtained through these methods is unstable due to human memory limitations and subjectivity, making it challenging to support accurate modeling and decision-making processes\cite{cottrill2013future}. Moreover, these traditional approaches often impose significant time and effort burdens on respondents leading to low participation rates and potential data bias\cite{cottrill2013future}. Although GPS loggers can automatically record the location and movements of participants, thereby providing accurate travel data, it is necessary for participants to carry an additional device and ensure its continuous operation throughout the survey period in order to avoid missing any travel information\cite{cottrill2013future}. Moreover, relying solely on GPS data does not directly yield detailed information such as trip purpose and traffic patterns, which often require additional input from participants or inference by algorithms, thus increasing the complexity of data processing \cite{hong2021insights}.

\section{Introduction of Future Mobility Sensing (FMS)\cite{alho2022online}\cite{cottrill2013future}}
FMS is a platform that collects and visualizes data by using mobile sensing technology, machine learning algorithms, and user verification to accurately record and present detailed travel and activity data. The development of future mobility sensing (FMS) technology marks a major shift in the way traffic data is collected, particularly the convergence of smartphone technology with location-based data collection. FMS utilizes GPS, GSM, Wi-Fi and accelerometers to collect high-resolution objective data on travel patterns and behavior in real time. This technique not only improves the accuracy of the data, but also reduces the recall bias associated with traditional surveys.
\begin{figure}
\centering
\includegraphics[width=9.1cm]{background_report/figures/FMS.png}
\caption{Future Mobility Sensing (FMS) platform architecture\cite{cottrill2013future}}
\label{figure:1}
\end{figure}
\section{Architecture of FMS\cite{cottrill2013future}}
The FMS system (Figure \ref{figure:1}) consists of three interrelated parts. It includes a mobile app or tracking device equipped with various sensing technologies to collect data. The backend of the system is a server with a database and custom algorithms to infer the details of the trip, such as the trip site, mode and purpose, thereby reducing the burden on the user. In addition, a user interface accessible through mobile phones and web platforms allows participants to verify their activities. With validation, more information can be gathered and comprehensive data can be displayed. Users can visually see their daily trips and activities on a geo-plotted timeline and can also confirm trips automatically detected by the system.
\section{Comparative Advantages of FMS}
FMS offers several distinct advantages over traditional methods, particularly in terms of data quality and participant burden. For example, in the Future Mobility Survey conducted in Singapore, the use of smartphones enabled continuous tracking of travel activity without the need for active user input for each trip. This approach not only minimizes recall errors, but also greatly reduces the workload of participants, potentially increasing response rates and the richness of the collected data.\newline

As demonstrated in the Singapore study, the integration of FMS with traditional survey frameworks demonstrates its ability to enhance the data collection process. It provides a powerful platform for tracking detailed travel trails, patterns and duration, which is critical for developing more accurate traffic models and solutions.
\section{FMS and Elder Populations}
For the elderly, FMS is particularly beneficial. Due to the blank recall and the fragmented nature of travel patterns, traditional methods often fail to fully reflect the travel challenges faced by older people. FMS's real-time data collection can address these issues, providing more accurate and timely data to better analyze older users' travel needs and obstacles.
\section{Future Directions and Improvements}
While FMS has made welcome progress in travel data collection, its implementation is not without challenges. Issues such as digital literacy among the elderly, privacy concerns, and the widespread use of smartphones are all barriers that need to be addressed. Future research could focus on improving user interfaces for seniors, strengthening data privacy protections, and integrating FMS with other data sources to create comprehensive, user-friendly mobile tracking systems.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Technical Preparations}
\section{Mobile Framework: Swift}

Swift is Apple's proprietary programming language designed for iOS, macOS, watchOS, and tvOS application development. Known for its security features, speed, and modern syntax, it is powerful and easy for developers to use. In mobile development, Swift's performance optimizations and comprehensive error handling enable developers to build fast, reliable applications. In Xcode's integrated development environment, swift development can be hot deployed and updated in real time. In addition, swift has a rich set of frameworks for invoking the underlying functions of Apple devices, including GPS, gyroscopes, accelerometer, data usage detection, and inter-device communication. With these capabilities, swift can provide a complex and efficient user experience for my applications.

\section{Backend Framework: Java Spring\cite{SpringFramework} \& Python FastAPI}
The Java Spring Framework and Python FastAPI are two popular back-end frameworks today that are widely used to build high-performance and easily extensible server-side applications.\newline

Java Spring stands out for its versatility and high degree of integration, and it is suitable for the full range of development from simple stand-alone applications to complex enterprise applications. Spring provides developers with a powerful and flexible programming and configuration environment that covers tasks as diverse as dependency injection, aspect oriented programming, and transaction management. Its modular design allows developers to accurately select the required components according to the needs of the project, thereby increasing the efficiency of application development. In addition, Spring has a large developer community that provides rich framework support for a variety of features. Spring's database connectivity capabilities, powerful security configuration capabilities, and extensive ecosystem of cloud-native microservices have made it a great convenience for me as I develop my applications.\newline

Python FastAPI is a modern API framework designed for high-performance application development. It makes clever use of Python's async/await asynchronous features, type annotations, and automated data model validation, which not only greatly reduces the amount of code, but also significantly improves runtime efficiency. Because of its support for asynchronous programming, FastAPI shows excellent performance when dealing with large data volumes or high concurrency scenarios, making it particularly suitable for IO-intensive applications. When I was developing machine learning services, FastAPI was able to handle the huge amount of training and prediction data with ease, which was perfect for my needs.

\section{Database: PostgreSQL \& Redis}
PostgreSQL and Redis are widely used in their respective areas of industry to build full-featured, efficient, and secure database management systems.\newline

PostgreSQL is a cutting-edge open source object-relational database system recognized for its stability, high performance, and ability to handle complex queries. It supports a wide variety of data types and shows high scalability, enabling users to create personalized functions and data types, and to write server-side code in a variety of programming languages. PostgreSQL adheres to the ACID standard, making it a useful tool for transaction processing systems with strict data integrity requirements. At the same time, it provides excellent concurrency support in environments with frequent read and write operations through multi-version concurrency control (MVCC) technology, thereby improving efficiency. In addition, PostgreSQL is very scalable, so it is ideal for handling large amounts of data in enterprise applications. Since the data that my application needs to store, such as latitude, speed, username, etc., relates only to the underlying data types, and there are associations between these data, a relational database becomes my first choice. At the same time, given the need for security and extensibility, PostgreSQL met my requirements.\newline

Redis is a memory-based unstructured data storage solution that can be used as a database, cache, and message broker. Redis is known for its incredible speed and supports multiple data structures such as strings, lists, collections, and ordered collections, so it can handle a variety of application scenarios from basic caching to complex messaging patterns. The atomicity of its operation provides a reliable performance guarantee for concurrent data processing. While Redis primarily runs in memory to ensure its performance, it is often used for high-speed transactions and real-time applications, making it ideal for scenarios that require fast data access, such as caching, session management, and real-time analytics. In order for my application to respond quickly to user needs, I need to quickly store some hot data that does not need to be persisted, such as session information. Redis features make it ideal for achieving this goal.

\section{Machine Learning: PyTorch}
PyTorch, an open source machine learning framework developed by Facebook's AI Research Lab, stands out for its dynamic compute graphs, Python interface, GPU acceleration, rich ecosystem of tools and libraries, and active community. Its dynamic computation diagrams allow for flexible model building and runtime modifications, simplifying debugging and facilitating experimentation. PyTorch integrates seamlessly with Python, simplifying development and prototyping, while significantly improving performance through CUDA's GPU acceleration. That makes it suitable for training deep neural networks on large datasets. Its extensive ecosystem and active community provide resources and support for a variety of tasks and applications, which also help me to build my own deep learning model for my application.

\section{Distributed microservice Framework: Docker \& Kubernetes}
Kubernetes, referred to as K8s, is a Google-developed open-source orchestration platform for containers. It facilitates automated deployments, large-scale seamless scalability, and the proficient handling of containerized applications. Its capacity to spawn and oversee multiple containers streamlines operational and maintenance workloads, thanks to its inbuilt load balancing strategies that aid in the management, discovery, and access of application instance clusters. In the realm of microservices, Kubernetes brings forth automated deployments, scalability, and administrative abilities, which adjust the volume of service instances in real-time to accommodate fluctuating loads efficiently, all while maintaining optimal availability and minimizing resource wastage. Additionally, its clever scheduling mechanism ensures optimal resource usage by allocating resources based on the actual needs of each container and service.\newline

Docker is an open-source containerization tool that aids developers in bundling applications and their dependencies into nimble, transferable containers, ready for deployment on any widespread Linux system. Docker boasts several noteworthy features, including a secure container environment, minimal performance impact, virtualization, app isolation, and swift deployment. In a microservices setup, Docker's containerization allows every microservice to operate independently within its own container, ensuring uninterrupted deployments and operations. This self-sufficiency bolsters the portability and responsiveness of microservices, simultaneously elevating the system's fault tolerance and scalability.\newline

When it comes to microservices, both Kubernetes and Docker are indispensable. Docker wraps up microservices in distinct containers, easing their rapid deployment and isolation. Kubernetes, meanwhile, oversees and coordinates these containers, automating deployments, scaling, load distribution, and service identification. The amalgamation of these technologies vastly simplifies the oversight and operation of microservices, boosting developmental and deployment efficiency, and guaranteeing superior durability and flexibility. This symbiotic blend enables microservices frameworks to adapt swiftly to business needs, scaling up or down as required. As a result, deploying an array of services within my server-based applications becomes a breeze, with phased introductions of new services being a straightforward endeavor.
\section{Database framework: Amazon RDB}
Amazon RDS, or Amazon Relational Database Service, is an excellent service from Amazon Cloud Technologies that minimizes the complexity and hassle of relational databases. RDS not only provides users with an easy-to-use control panel that helps them quickly create, configure, and manage databases, but also greatly reduces the operational burden of users through automated hardware and software maintenance. RDS supports relational database engines such as MySQL, PostgreSQL, and Oracle, regardless of business requirements. At the same time, its high-performance storage and scalable architecture ensures the efficiency and stability of the database, and the powerful data backup and recovery mechanism ensures the security of the data. RDS's real-time monitoring and alerting system gives users a comprehensive view of the health of the database, and any performance issues or anomalies can be timely feedback and dealt with. For those features, Amazon RDB is a reliable service to store my application's data. 
\section{DevOps: Jenkins}
Jenkins plays a pivotal role in DevOps systems, orchestrating the symphony of continuous integration (CI) and continuous delivery (CD). It constantly monitoring changes to the code, and if there is a change, it quickly triggers the build process. This automated monitoring mechanism allows Jenkins to efficiently integrate code changes and significantly reducing integration headaches. Jenkins also moves into automated testing, executing tests with a high degree of accuracy to ensure that code quality is always at a high standard. This automation not only speeds up the feedback loop, but also reduces the risk of errors in the production environment. Jenkins is designed in a coded way to make the process from development, staging and deployment to production smoother and more elegant. At the same time, its deep compatibility with a variety of tools and technologies has further make it important in DevOps workflows. Its strong scalability allows developers to tailor CI/CD processes to their actual needs and adapt flexibly as needs change. The core values of DevOps in Jenkins - automation, collaboration, and continuous improvement, which can help me to build my software in a effective way.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Project Plan}
\section{Frontend Design}
\section{System Design}
\subsection{Mobile Design (Figure \ref{figure:3})}
The design of the Apple mobile app for mobile devices seamlessly integrates the mobile and watch apps, creating a comprehensive and complementary system. On the mobile side, it leverages the SwiftUI framework, a modern and declarative user interface building tool, to craft an intuitive and user-friendly interface. Simultaneously, by incorporating the MapKit framework, applications can embed detailed map views that not only facilitate location tracking but also offer extensive map functionalities. Moreover, this application utilizes the CoreMotion framework to access device data such as GPS and accelerometer information in order to provide users with precise path tracking and traffic usage prediction.\newline

The design of the watch app also utilizes the SwiftUI framework to ensure visual and interactive consistency with the mobile app, thereby enhancing user experience. The watch app tracks users' health and path information, leveraging the WatchConnectivity framework for seamless data exchange between mobile apps and watch apps. This enables key health information collected on the watch to be seamlessly transferred to the mobile app, providing users with a holistic view of their health management.\newline

The primary objective of this mobile system is to provide users with a seamless cross-device experience, allowing them to easily access and manage key functions on their mobile devices while receiving instant tracking data and notifications through the watch app. This design approach ensures that users have convenient access to relevant information and services regardless of their situation. By incorporating GPS tracking, CoreMotion data collection, and traffic forecasting functions, this application successfully combines health monitoring, path tracking, and traffic analysis capabilities to provide users with in-depth insights. The functional complementarity between these two applications provides users with a comprehensive and convenient experience. Additionally, URLSession is intelligently utilized for server data retrieval while CoreData ensures secure long-term storage within the entire system's data flow.

\begin{figure}
\centering
\includegraphics[width=12cm]{background_report/figures/mobile-system.png}
\caption{IMOTION Mobile System}
\label{figure:3}
\end{figure}

\subsection{Web Design (Figure \ref{figure:4})}
The Web client utilizes ReactJS to construct the user interface. ReactJS is a widely adopted front-end JavaScript library that effectively constructs responsive and interactive user interfaces, enabling researchers to manipulate and manage their data with enhanced intuitiveness. By design, the Web client offers two primary methods for handling data: JSPdf-autotable and export-from-json. The JSPdf-autotable method empowers researchers to directly convert data into PDF files, which proves valuable for those who need to generate reports or documents. Through JSPdf-autotable, researchers can personalize the appearance and layout of PDF files, ensuring precise data representation and readability. Conversely, the export-from-json method provides the flexibility to transform data into alternative formats such as XML and CSV files. This functionality is crucial for researchers seeking integration with other systems or conducting in-depth analysis. By selecting export-from-JSON, researchers can effortlessly export data in their desired format for seamless interaction with other tools or platforms. In terms of privacy settings, this Web client allows researchers to adjust the privacy level of their data according to individual requirements. Whether opting for JSPdf-autotable or export-from-json, researchers have the ability to modify privacy settings based on data sensitivity and purpose while guaranteeing utmost security and compliance.
\begin{figure}
\centering
\includegraphics[width=12cm]{background_report/figures/web-system.png}
\caption{IMOTION Web System}
\label{figure:4}
\end{figure}

\subsection{Backend Service Design (Figure \ref{figure:5})}
The IMOTION backend service adopts a microservice architecture that boasts robust security, high availability, and scalability. Kubernetes automates the deployment and management of microservice applications, facilitating internal and external communication between services and users by exposing service ports. The Redis database is utilized for hotpot data caching. The Spring API Gateway serves as a reverse proxy, ensuring security measures and load balancing capabilities, while the PostgreSQL database cluster provides persistent data storage. Additionally, the design encompasses five key API microservices: User API handles user Data invocation; Data Collection API manages user-related data collection and invocation; Statistics and Survey API facilitates data processing and analysis; AI model contributes intelligence to the service; Researcher API enables researcher-related operations invocation. Google Apple Map Server supplies maps for the service. All communication takes place over HTTP to guarantee secure data transmission. This backend service is meticulously designed to meet modern Internet application requirements while delivering stable, efficient, and intelligent support.
\begin{figure}
\centering
\includegraphics[width=12cm]{background_report/figures/backend-service-system.png}
\caption{IMOTION Backend Service System}
\label{figure:5}
\end{figure}
\section{Database Design}
\begin{itemize}
    \item General Entity, which contains information about application's users and what privacy level users want to participant. The interaction log describes how users interact with system.
    \item Raw Data, which stores raw data in the trip level. There are two Entities:"Purpose" entity are responsible for listing the form of 
    \item Activity
    \item Researcher
    \item Hot Values
\end{itemize}
\begin{figure}
\centering
\includegraphics[width=12cm]{background_report/figures/database.png}
\caption{IMOTION Database Design}
\label{figure:6}
\end{figure}
\section{Machine Learning Design}

%% bibliography
\bibliography{background_report/references}



\end{document}
